<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SPOJ Solution</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../StyleCSS/solution.css">
    <script src="../JSCODE/Solution.js"></script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
    <script src="../JSCODE/HeadStyle.js"></script>
</head>

<body>
    <header style="background: #d2b4de ">
        <h1 style="font-family: 'Times New Roman', Times, serif;">SPOJ Solution</h1>
        <nav>
            <a href="../index.html">Trang ch·ªß</a>
            <a href="../mainn/Blog.html">Blog</a>
        </nav>
    </header>
    <div class="container">

        <div class="sidebar">
            <h3 style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">M·ª•c l·ª•c</h3>
            <ul>
                <li><a href="#section1">B√†i to√°n 1: NHAY - A Needle in the Haystack</a></li>
                <li><a href="#section2">B√†i to√°n 2: KNAPSACK - The Knapsack Problem</a></li>
                <li><a href="#section3">B√†i to√°n 3: PR003004 - Digit Sum</a></li>
            </ul>
        </div>
        <!-- Main content -->
        <div class="main">
            <h2 style="font-family: 'Times New Roman', Times, serif;">Gi·∫£i ph√°p c·ªßa c√°c b√†i t·∫≠p tr√™n SPOJ</h2>
            <p><strong>Fact : </strong>C√°c b√†i t·∫≠p tr√™n SPOJ, c≈©ng gi·ªëng nh∆∞ codeforces, nh∆∞ng c√≥ th·ªÉ ƒë·ªÅ b√†i s·∫Ω d·ªÖ hi·ªÉu
                h∆°n nhi·ªÅu</p>

            <!-- Section 1 -->
            <div class="section fontext" id="section1">
                <div class="section-header" onclick="toggleSection(this)"
                    style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">B√†i to√°n 1: NHAY - A Needle
                    in the Haystack
                </div>
                <div class="section-content">
                    <div class="blog-tags">
                        <p>Tag : </p>
                        <span class="tag">Hash</span>
                        <span class="tag">String</span>
                    </div>
                    <!-- link -->
                    <strong>Link b√†i to√°n: </strong><a
                        href="https://www.spoj.com/problems/NHAY/">https://www.spoj.com/problems/NHAY/</a>
                    <!--de bai-->
                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header">
                            T√≥m t·∫Øt ƒë·ªÅ b√†i
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <p>Cho hai chu·ªói **needle** v√† **haystack**, t√¨m t·∫•t c·∫£ v·ªã tr√≠ xu·∫•t hi·ªán c·ªßa **needle**
                                trong **haystack**.</p>
                            <p><strong>V√≠ d·ª•:</strong></p>
                            <p><strong>Input:</strong></p>
                            <pre>
2
na
banananobano
                            </pre>
                            <p><strong>Output: </strong></p>
                            <pre>
2
4
</pre>
                            </pre>
                            <p><strong>Gi·∫£i th√≠ch:</strong> "na" xu·∫•t hi·ªán t·∫°i v·ªã tr√≠ **2** v√† **4**.</p>
                        </div>
                    </div>


                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header">
                            L·ªùi gi·∫£i chi ti·∫øt
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <p>üîπ B√†i to√°n s·ª≠ d·ª•ng **Hashing (Rolling Hash)** ƒë·ªÉ t√¨m ki·∫øm chu·ªói con nhanh ch√≥ng.</p>
                            <p><strong>√ù t∆∞·ªüng ch√≠nh:</strong></p>
                            <ul>
                                <li>**Ti·ªÅn x·ª≠ l√Ω**: T√≠nh gi√° tr·ªã hash c·ªßa chu·ªói **needle** v√† prefix hash c·ªßa
                                    **haystack**.</li>
                                <li>S·ª≠ d·ª•ng c√¥ng th·ª©c **getHash(l, r)** ƒë·ªÉ l·∫•y hash c·ªßa t·ª´ng ƒëo·∫°n con trong
                                    **haystack**.</li>
                                <li>So s√°nh hash ƒë·ªÉ t√¨m t·∫•t c·∫£ v·ªã tr√≠ kh·ªõp v·ªõi **needle**.</li>
                            </ul>
                            <p><strong>Quy tr√¨nh th·ª±c hi·ªán:</strong></p>
                            <ul style="list-style: none; padding-left: 0;">
                                <li>üü¢ <strong>B∆∞·ªõc 1:</strong> Ti·ªÅn x·ª≠ l√Ω m·∫£ng **Pow** (l≈©y th·ª´a c·ªßa base) v√† **Hash**
                                    (prefix hash c·ªßa **haystack**).</li>
                                <li>üü° <strong>B∆∞·ªõc 2:</strong> Duy·ªát t·ª´ng v·ªã tr√≠ trong **haystack**, so s√°nh hash v·ªõi
                                    **needle**.</li>
                                <li>üî¥ <strong>B∆∞·ªõc 3:</strong> N·∫øu kh·ªõp, in ra v·ªã tr√≠ xu·∫•t hi·ªán.</li>
                            </ul>
                            <p><strong>ƒê·ªô ph·ª©c t·∫°p:</strong> O(n + m), nhanh h∆°n nhi·ªÅu so v·ªõi ph∆∞∆°ng ph√°p brute-force.
                            </p>
                        </div>
                    </div>


                    <!--solution-->

                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header"
                            style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">
                            Solution
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            <pre><code class="language-cpp stylecode">
#include &lt;bits/stdc++.h&gt;
using namespace std;
 
typedef long long ll;
#define ed cout << "\n"
#define mem(a,b) memset(a, b, sizeof(a))
#define all(a) a.begin(), a.end()
#define sz(A) (int) A.size()
#define faster() ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);
 
const ll MOD = 1e9 + 9;
const int base = 31;
vector&lt;ll&gt;Hash, Pow;
string a, b;
ll n, m, k, HashA, ok;
 
void __init__() {
    a = ' ' + a;
    b = ' ' + b;
    n = a.length() - 1, m = b.length() - 1;
    Hash.assign(m + 1, 0);
    Pow.assign(m + 1, 0);
    Pow[0] = 1; HashA = 0; ok = 0;
    for(int i = 1; i <= m; i++) {
        Pow[i] = (Pow[i - 1] * base) % MOD;
        Hash[i] = (Hash[i - 1] * base + (b[i] - 'a' + 1)) % MOD;
    }
    for(int i = 1; i <= n; i++) {
        HashA = (HashA * base + (a[i] - 'a' + 1)) % MOD;
    }
}
 
ll getHash(int l, int r) {
    return (Hash[r] - Hash[l - 1] * Pow[r - l + 1] % MOD + MOD) % MOD;
}
 
void solve() {
    while(cin >> n) {
        cin >> a >> b;
        __init__();
        for(int i = 1; i <= m - n + 1; i++) {
            if(getHash(i, i + n - 1) == HashA) {
                cout << i - 1 << endl;
                ok = 1;
            }
        }
        if(!ok) ed;
    }
}
 
int main(){
    faster();
    solve();
    return 0;
}  </code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2 -->
            <div class="section fontext" id="section1">
                <div class="section-header" onclick="toggleSection(this)"
                    style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">B√†i to√°n 2: KNAPSACK - The
                    Knapsack Problem</div>
                <div class="section-content">
                    <div class="blog-tags">
                        <p>Tag : </p>
                        <span class="tag">Dynamic programming</span>
                    </div>
                    <!-- link -->
                    <strong>Link b√†i to√°n: </strong><a
                        href="https://www.spoj.com/problems/KNAPSACK/">https://www.spoj.com/problems/KNAPSACK/</a>
                    <!--de bai-->
                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header">
                            T√≥m t·∫Øt ƒë·ªÅ b√†i
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <p>Cho m·ªôt c√°i t√∫i c√≥ s·ª©c ch·ª©a **S** v√† **N** m√≥n ƒë·ªì, m·ªói m√≥n c√≥ k√≠ch th∆∞·ªõc v√† gi√° tr·ªã.</p>
                            <ul>
                                <li>Nhi·ªám v·ª•: Ch·ªçn m·ªôt t·∫≠p h·ª£p ƒë·ªì sao cho t·ªïng gi√° tr·ªã l·ªõn nh·∫•t m√† kh√¥ng v∆∞·ª£t qu√° s·ª©c
                                    ch·ª©a.</li>
                            </ul>
                            <p><strong>Input:</strong></p>
                            <pre>
4 5
1 8
2 4
3 0
2 5
2 3
</pre>
                            <p><strong>Output:</strong></p>
                            <pre>
13
</pre>
                            <p><strong>Gi·∫£i th√≠ch:</strong> Ch·ªçn c√°c m√≥n c√≥ gi√° tr·ªã 8, 5, t·ªïng gi√° tr·ªã l·ªõn nh·∫•t l√†
                                **13**.</p>
                        </div>
                    </div>
                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header">
                            L·ªùi gi·∫£i chi ti·∫øt
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <p>B√†i n√†y s·ª≠ d·ª•ng quy ho·∫°ch ƒë·ªông (Dynamic Programming) ƒë·ªÉ gi·∫£i b√†i to√°n Knapsack.</p>
                            <ul>
                                <li>Ta t·∫°o m·ªôt m·∫£ng **dp[i][j]** ƒë·∫°i di·ªán cho gi√° tr·ªã l·ªõn nh·∫•t c√≥ th·ªÉ ƒë·∫°t ƒë∆∞·ª£c v·ªõi **i**
                                    m√≥n ƒë·ªì v√† s·ª©c ch·ª©a **j**.</li>
                                <li>N·∫øu kh√¥ng ch·ªçn m√≥n th·ª© **i**, gi√° tr·ªã v·∫´n l√† **dp[i-1][j]**.</li>
                                <li>N·∫øu ch·ªçn m√≥n th·ª© **i** (n·∫øu v·ª´a t√∫i), ta c·∫≠p nh·∫≠t gi√° tr·ªã l·ªõn h∆°n gi·ªØa **dp[i][j]**
                                    v√† **dp[i-1][j - w[i]] + v[i]**.</li>
                            </ul>
                            <p><strong>Quy tr√¨nh th·ª±c hi·ªán:</strong></p>
                            <ul style="list-style: none; padding-left: 0;">
                                <li>üü¢<strong>B∆∞·ªõc 1:</strong> Kh·ªüi t·∫°o m·∫£ng **dp** v·ªõi gi√° tr·ªã ban ƒë·∫ßu b·∫±ng 0.</li>
                                <li>üü°<strong>B∆∞·ªõc 2:</strong> Duy·ªát qua t·ª´ng m√≥n ƒë·ªì, c·∫≠p nh·∫≠t gi√° tr·ªã l·ªõn nh·∫•t c√≥ th·ªÉ
                                    ƒë·∫°t ƒë∆∞·ª£c.</li>
                                <li>üü†<strong>B∆∞·ªõc 3:</strong> In ra k·∫øt qu·∫£ l√† gi√° tr·ªã l·ªõn nh·∫•t t√¨m ƒë∆∞·ª£c.</li>
                            </ul>
                        </div>
                    </div>


                    <!--solution-->

                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header"
                            style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">
                            Solution
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            <pre><code class="language-cpp stylecode">
#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long ll;
#define mem(a, b) memset(a, b, sizeof(a))
#define all(a) a.begin(), a.end()
#define sz(A) (int)A.size()
#define faster() ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL)
const int N = 2e6 + 15;
const int MOD = 1e9 + 7;
const int INF = 1e5 + 1;
const int mxn = 1000 + 15;
 
vector&lt;vector&lt;int&gt;&gt;dp;
vector&lt;int&gt;w, v;
int n, sz, ans = -1;
void solve() {
	cin >> sz >> n;
	dp.assign(n + 1, vector<int>(sz + 1, 0));
	w.assign(n + 1, 0);
	v.assign(n + 1, 0);
	for(int i = 1; i <= n; i++) cin >> w[i] >> v[i];
	for(int i = 1; i <= n; i++) {
		for(int j = 1; j <= sz; j++) { 
			dp[i][j] = dp[i - 1][j];
			if(w[i] > j) continue;
			dp[i][j] = max(dp[i][j], dp[i - 1][j - w[i]] + v[i]);             
			ans = max(ans, dp[i][j]);                 
		}
	}
	cout << ans << endl;
}
int main() {
    faster();
    //freopen("input.INP", "r", stdin);
   // freopen("output.OUT", "w", stdout);
    int t; t = 1; 
    //cin >> t;
    while(t--){
    	clock_t z = clock();
    	solve();
    	debug("Total Time: %.3f\n", (double)(clock() - z) / CLOCKS_PER_SEC);
    	if(t != 0) ed;
	}
    return 0;
}
</code></pre>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Section 3 -->
            <div class="section fontext" id="section1">
                <div class="section-header" onclick="toggleSection(this)"
                    style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">B√†i to√°n 3: PR003004 - Digit
                    Sum
                </div>
                <div class="section-content">
                    <div class="blog-tags">
                        <p>Tag : </p>
                        <span class="tag">Dynamic Programming</span>
                        <span class="tag">Math</span>
                    </div>
                    <!-- link -->
                    <strong>Link b√†i to√°n: </strong><a
                        href="https://www.spoj.com/problems/PR003004/">https://www.spoj.com/problems/PR003004/</a>
                    <!--de bai-->
                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header">
                            T√≥m t·∫Øt ƒë·ªÅ b√†i
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <p>Cho hai s·ªë nguy√™n kh√¥ng √¢m **a** v√† **b**, t√≠nh t·ªïng t·∫•t c·∫£ c√°c ch·ªØ s·ªë xu·∫•t hi·ªán trong
                                kho·∫£ng **[a, b]**.</p>
                            <p><strong>Input :</strong></p>
                            <pre>
a = 28, b = 31
</pre>
                            <p><strong>Output :</strong></p>
                            <pre>
28
</pre>
                            <p><strong>Gi·∫£i th√≠ch :</strong> 2+8 + 2+9 + 3+0 + 3+1 = 28</p>
                        </div>
                    </div>

                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header">
                            L·ªùi gi·∫£i chi ti·∫øt
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <p> B√†i n√†y s·ª≠ d·ª•ng k·ªπ thu·∫≠t **quy ho·∫°ch ƒë·ªông s·ªë h·ªçc (Digit DP)** ƒë·ªÉ t√≠nh t·ªïng ch·ªØ s·ªë c·ªßa
                                t·∫•t c·∫£ c√°c s·ªë trong kho·∫£ng **[a, b]** m·ªôt c√°ch hi·ªáu qu·∫£.</p>
                            <ul style="list-style: none; padding-left: 0;">
                                <li>üîπ <strong>√ù t∆∞·ªüng ch√≠nh:</strong></li>
                                <ul style="list-style: none; padding-left: 20px; margin-top: 10px;">
                                    <li>‚úîÔ∏è **T√≠nh t·ªïng ch·ªØ s·ªë c·ªßa t·∫•t c·∫£ c√°c s·ªë t·ª´ 1 ƒë·∫øn x** b·∫±ng ph∆∞∆°ng ph√°p ƒë·ªá quy v·ªõi
                                        nh·ªõ tr·∫°ng th√°i (Memoization).</li>
                                    <li>‚úîÔ∏è Sau ƒë√≥, t·ªïng ch·ªØ s·ªë c·ªßa **[a, b]** ch√≠nh l√† hi·ªáu c·ªßa t·ªïng ch·ªØ s·ªë t·ª´ **1 ƒë·∫øn
                                        b** tr·ª´ ƒëi t·ªïng ch·ªØ s·ªë t·ª´ **1 ƒë·∫øn a-1**.</li>
                                </ul>
                            </ul>

                            <p><strong>Quy tr√¨nh th·ª±c hi·ªán:</strong></p>
                            <ul style="list-style: none; padding-left: 0;">
                                <li>üü¢ <strong>B∆∞·ªõc 1:</strong> Chuy·ªÉn s·ªë **x** th√†nh m·∫£ng ch·ªØ s·ªë.</li>
                                <li>üü° <strong>B∆∞·ªõc 2:</strong> D√πng **quy ho·∫°ch ƒë·ªông** ƒë·ªÉ duy·ªát t·ª´ng ch·ªØ s·ªë t·ª´ tr√°i
                                    sang ph·∫£i, gi·ªØ tr·∫°ng th√°i t·ªïng ch·ªØ s·ªë v√† ki·ªÉm so√°t gi·ªõi h·∫°n.</li>
                                <li>üü† <strong>B∆∞·ªõc 3:</strong> K·∫øt qu·∫£ cu·ªëi c√πng l√† **getSum(b) - getSum(a-1)**.</li>
                            </ul>
                        </div>
                    </div>

                    <!--solution-->

                    <div class="solution-card" onclick="toggleSolution(this)">
                        <div class="solution-header"
                            style="font-family: 'Times New Roman', Times, serif; font-size: 18px;">
                            Solution
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                        <div class="solution-content">
                            <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            <pre><code class="language-cpp stylecode">
#include &lt;bits/stdc++.h&gt;
using namespace std;
 
typedef long long ll;
#define mem(a,b) memset(a, b, sizeof(a))
#define all(a) a.begin(), a.end()
#define sz(A) (int) A.size()
#define faster() ios_base::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);
const int N = 1e5 + 15;
 
int64_t dp[19][180][2];
ll q, l, r;
 
int64_t f(vector&lt;int&gt;& a, int pos, int sum, int fl) {
    if(pos >= a.size()) return sum;
    int64_t &nemo = dp[pos][sum][fl];
    if(nemo != -1) return nemo;
    int limit = fl ? a[pos] : 9;
    nemo = 0;
    for(int i = 0; i <= limit; i++) {
        nemo = nemo + f(a, pos + 1, sum + i, fl && (i == limit));
    }
    return nemo;
}
 
vector&lt;int&gt; getDigits(ll x) {
    vector&lt;int&gt;nums;
    while(x) {
        nums.push_back(x % 10);
        x = x / 10;
    }
    reverse(all(nums));
    return nums;
}
 
int64_t getSum(ll x) {
    if(x <= 0) return 0;
    mem(dp, -1);
    vector&lt;int&gt;digits = getDigits(x);
    return f(digits, 0, 0, 1);
}
 
int main(){
    faster()
    cin >> q;
    while(q--) {
        cin >> l >> r;
        cout << getSum(r) - getSum(l - 1) << endl;
    }
    return 0;
} </code></pre>
                        </div>
                    </div>
                </div>
            </div>
</body>

</html>